<!DOCTYPE html>
<html>
  <head>
    <title>PhoneGap Application</title>
    <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
    <script type="text/javascript">
    
    var downloadDirectory = '';
    
    // Wait for PhoneGap to load
    document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    function onDeviceReady() {
        window.requestFileSystem(LocalFileSystem.PERSISTENT,0,onFileSystemSuccess,null);
        $('#download_btn').on('click',function(e){
            download();
        })
    }
    
    function onFileSystemSuccess(fileSystem){
        fileSystem.root.getDirectory('my_downloads',{create:true},function(dir){
            downloadDirectory = dir;
        },onError);
    }
    
    function download(){
        var fileURL = document.getElementById('file_url').value;
        var localFileName = getFileName(fileURL);
        $('#message').html('Downloading '+ localFileName);
        var ft = new FileTransfer();
        ft.download(
                fileURL,
                downloadDirectory.fullPath +'/'+ localFileName,
                function(entry){
                    $('#message').html('Download Complete. File saved to: '+
                            entry.fullPath
                    );
                },
                function(error){
                    alert('There was an error');
                }
    );
    }
    
    function getFileName(url){
        if(url){
            var n = url.toString.match(/.*\/(.+?)\./);
            if(n && n.length > 1){
                return n[1] + '.'+ url.split('.').pop();
            }
        }
        return '';
    }
    
    function onError(error){
        $('#message').html('There was a problem '+ error.code);
    }
    

    </script>
  </head>
  <body>
      <input type="text" id="file_url" value="" />
      <input type="button" id="download_btn" value="Download" />
      <div id="message"></div>
  </body>
</html>